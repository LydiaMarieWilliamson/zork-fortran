History
━━━━━━━
MDL
───
1978/03/04	V1.0A Debugging version.
1978/06/14	V1.1A Public version with parser.
1978/08/10	V1.1B DECUS version.
1978/09/10	V2.0A Endgame.
1978/10/10	V2.1A Puzzle Room.
1979/01/18	V2.2A Revised DECUS version.
1979/11/15	V2.3A Bug fixes.
1980/02/28	V2.4A Compressed text file.
1980/07/18	V2.5A Transportable data base file.

Fortran
───────
1987/02/11	V2.6A Converted to f77/Unix.
1987/09/14	V2.6B Converted to f77/Unix for pdps and Vaxen.

ANSI C (C1991)
──────────────
1991/03/11	V2.7A Converted to C (based on V2.6B).

C99 (C2021)
───────────
2021/09/27	V2.8A Converted to C99 (based on V2.6A and partly also on V2.7A).

C99 (C2021) Translation & Upgrades
──────────────────────────────────
2021/09/14	The raw translation of the Fortran source into C, using f2c (version 20190311).
		Common Blocks are translated incorrectly and #include's are inserted in-line.
		All of that has to be fixed and undone.
		The file ‟Translate.log” contains some of the details provided by the translator.
2021/09/14	A first Makefile has been added.
		This assumes that the f2c library and the include file ‟f2c.h” have been installed
		The file ‟Compile.log” contains some of the details provided by the first run of ‟make”.
2021/09/14	The undefined function itime() has been resolved with a ‟fallback” function ITime().
2021/09/14	The ‟f2c.h” file has been internalized as ‟F2C.h”.
		Additional normalization has been done on the source code layout.
2021/09/14	Most of ‟F2C.h” has been nativized to C and eliminated.
2021/09/14	Move the declarations of ‟built-in” functions (defined in the f2c library) to "F2C.h".
		Further information on the f2c library and utility may be found in https://www.netlib.org/f2c/f2c.pdf.
2021/09/15	Collating the definitions of the common blocks into ‟common.c”.
2021/09/15	Eliminated the duplicate common block definitions from ‟common.c”.
		Compilation is now possible, but no baseline has yet been established.
		Hidden size-dependencies for data I/O exist, which crash the file I/O.
2021/09/15	Added the data/configuration files d{indx,text}.dat as symbolic links (for now).
2021/09/15	Normalized the layout of the comments.
2021/09/15	Strength reduction:
		∙	lifted input-only function parameters to value parameters.
		∙	lifted output-only parameters to return values, when singular.
		∙	commented out unused parameters.
		∙	eliminated ‟Void”, after reducing it to ‟void”.
		No effect on the compile-time or run-time baselines.
2021/09/16	Encapsulation of the f2c library in F2C.c; as a first step to nativizing and replacing it.
		The program crashes occur in the f2c library functions, and these need to be replaced and fixed.
2021/09/16	Elimination of static constant parameters.
2021/09/16	Collating the in-line inserted ‟include” files; in preparation of removing them back to include files.
2021/09/16	Regularized the translated copies of the ‟include” files and their common block and equivalence definitions.
2021/09/17	The in-line versions of ‟parser.h” have been regularized and extracted, first.
2021/09/17	The in-line versions of ‟vocab.h” have been regularized and extracted, next,
		and combined with ‟parser.h” into ‟parse.h”.
2021/09/17	The initializations and comments in blkdata.c have been realigned to the form they had originally in Fortran.
		The extraneous includes in blkdata.c have been removed both here and in the Fortran version.
2021/09/17	Documented the translation error in the original Fortran and C versions ‟blkdata.{f,c}” in ‟Translate.log”.
2021/09/17	Collated the remaining in-line includes into ‟parse.h” and renamed the file ‟common.h”.
		In the 1991 version of the C program, most of the role of its ‟parse.h” is played, here, by ‟blkdata.c”,
		while its ‟vars.h” corresponds, here, to ‟common.h”.
2021/09/18	Extracted the in-line include files out into ‟common.h”.
		Regularized the names of the common block types.
2021/09/18	Separated the external function declarations and the function list in ‟Translate.log” out to ‟extern.h”.
2021/09/18	Correcting errors in blkdata.{c,f} (round 1 of 2).
2021/09/18	Strength reduction:
		∙	uninitialized ‟static” locals to ‟auto”
		∙	initialized ‟static” scalar locals to ‟auto const”
		∙	initialized ‟static” array locals to ‟static const”
2021/09/18	Lifting constant common blocks to enum types (round 1 of 2).
2021/09/19	Various other minor cleanups and repairs both here and in the 1991 C translation to bring them closer together.
		Their only significant difference, at this point, is the I/O and the formats of the black-box *.dat file(s).
2021/09/19	All the final ‟_”'s produced for globals by the translator were removed, except where names conflict.
		That includes any references to the names listed in this and other log and documentation files.
2021/09/19-20	Regularizing the file and function header comments - in both the old and new C translations and Fortran original.
2021/09/20	Fix up the ‟debug” statements and translate their I/O statements into ‟pidgin-C”.
2021/09/20-21	Aligning the file I/O between the C translations and Fortran original: file open, close and read.
2021/09/21	Aligning the file I/O between the C translations and Fortran original: file write.
2021/09/21-22	Reconciling the *.{c,h} files between the 1991 and 2021 translations (the first round).
		1991: The remnant of the ‟f2c.h” declarations present in ‟extern.h” are specially marked.
		2021: The include of ‟F2C.h” is (mostly) internalized in ‟extern.h”.
		The corresponding Makefiles brought closer in line.
		1991: A missing print statement for ‟cevent” has been added into the debug routine in gdt.c.
		2021: The pv union has been remade a struct, with the elimination of pv_2 from sverbs.c.
		1991: Initialized definitions in ‟common.c” have been put back into ‟dmain.c”.
2021/09/23	Reconciling differences in the order and layout of I/O statements (but not yet their actual coding).
		Reconciling differences between the order and initializations of declarations between the two.
		Reconciling the *.{c,h} files between the 1991 and 2021 translations (the second round).
		The segment in dsub.{c,f} responsible for producing variations in text output has been marked.
		This is the reason that ‟Test.in” will produce different results on different runs
		for the Fortran version (and the 2021 C translation, once a run-time baseline is established).
		1991: Missing comments from the Fortran original have been restored.
		2021: Extra comments from the Fortran original and translator have been removed.
		2021: Removed a bug in rooms.{c,f} arising from ‟TCHBT” being mistyped as ‟CHBT” in rooms.f and mistranslated.
2021/09/23	Reconciling differences between the adventurer, object and villain tables.
		The Fortran original split the large arrays {a,o,v}voc[] into tables bundled into common blocks,
		probably to overcome limitations on table sizes.
		The 1991 C translation reintegrated the tables and translated them as such, instead of as common blocks.
2021/09/23	Lifting the common blocks {dir,prp,buz}voc, respectively, to constant integer arrays {d,p,b}voc[].
		This is a bona fide upgrade: it goes beyond the Fortran original and 1991 C translation.
2021/09/23	Reconciling the remaining differences between the translations of the common blocks (/vers/).
		Changing vedit, in /vers/ (back) to character, from integer.
2021/09/23	Simplifying the translations of the common blocks:
		∙	removing excess "#defines"-s and de-mangling names/aliases,
		∙	lifting constant common blocks to enums, constant arrays or constants, wherever possible.
2021/09/24	Recoding of the (translations of the) Arithmetic IF statements
2021/09/24	Further simplification and reduction of the I/O-related f2c library routines.
2021/09/24	Most of the file I/O from ‟F2C.h” has been nativized and eliminated.
		The I/O for the index and save files is now operational.
		The I/O for the story file is partially operational.
2021/09/25	Elimination of the remaining non-I/O functions from ‟F2C.h”.
		Elimination of the remainder of ‟F2C.h”, with its merger into ‟extern.h”.
2021/09/25-26	The rest of the file output I/O from ‟F2C.h” has been nativized and eliminated.
		The I/O for the story file is now operational.
2021/09/26	The rest of the file input I/O from ‟F2C.h” has been nativized and eliminated.
		The libf2c dependency has been eliminated.
		The I/O for the user input is now operational, but not yet validated (and repaired, if need be).
2021/09/27	The I/O for the user input is now validated.
		‟make test” requires modification, because output for the Fortran original and 2021 C translation can vary.
		This feature was present, by design, in the Fortran version but was removed by the 1991 C translation.
2021/09/27	The 2021 C translation is now operational.
2021/09/27	Version change provisionally to 2.8; pending final decisions to be made on future version numbering.
2021/09/27	Removing the leading spaces put on each line of the game output; to bring it in line with the 1991 C translation.
2021/09/28	Reconciliation between the two C translations with minor recoding in various places.
		Reconciliation involving recoding that requires structural changes is being deferred.
2021/09/29	Removal of the translation-related comments.
		(Belatedly) removing redundant arithmetic generated originally by the f2c translator.
		Reconciliation involving minor structural changes.
2021/09/30	The remaining bugs in the data block initialization were repaired in both the C99 and Fortran 2018 versions.
		The remaining inconsistencies affected words that start in ‟INTO⋯”, ‟CLAY⋯”, ‟CRIMIN⋯”.
		The other inconsistencies that affected words starting in ‟HOURS⋯” and ‟PAPER⋯” were already repaired (2021/09/17).
